<!DOCTYPE html><html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Roulette AI PRO+</title>
<style>
body{
    background:#0b0b0b;
    color:#fff;
    text-align:center;
    font-family:Arial;
}

.mode-box{margin:10px;}
.mode-btn{
    padding:8px 15px;
    margin:5px;
    background:#222;
    color:#fff;
    border:none;
    border-radius:5px;
}
.mode-btn.active{
    background:#00c3ff;
}

.columns{
    display:flex;
    justify-content:center;
    margin-top:10px;
}

.col{
    margin:5px;
    padding:5px;
    border:1px solid #333;
}

.col-title{
    margin-bottom:5px;
}

.grid{
    display:grid;
    grid-template-columns:repeat(3,40px);
}

.num{
    width:40px;
    height:40px;
    line-height:40px;
    margin:2px;
    cursor:pointer;
    border-radius:4px;
    font-weight:bold;
}

.zero{
    width:60px;
    margin:auto;
    padding:10px;
    background:green;
    border-radius:6px;
    cursor:pointer;
}

.active-col{
    border:2px solid #00ffcc;
    box-shadow:0 0 10px #00ffcc;
}

.bar-bg{
    width:80%;
    height:10px;
    background:#222;
    margin:5px auto;
}

.bar{
    height:10px;
    width:0%;
    background:#00ffcc;
}

.history{
    margin-top:10px;
    font-size:14px;
}
.scan{
    animation: scanGlow 0.8s infinite alternate;
}

@keyframes scanGlow{
    from{ box-shadow:0 0 5px #00ffcc; }
    to{ box-shadow:0 0 25px #00ffcc; }
}
/* ===== BOX CHUNG ===== */
.box{
    width:90%;
    margin:10px auto;
    padding:10px;
    background:#111;
    border-radius:10px;
    border:1px solid #222;
}

/* ===== THANH % ===== */
.bar-bg{
    width:100%;
    height:14px;
    background:#222;
    border-radius:10px;
    margin:6px 0;
    overflow:hidden;
}

.bar{
    height:100%;
    width:0%;
    transition:0.3s;
}

/* Mức mạnh */
.weak{ background:#e74c3c; }      /* đỏ */
.medium{ background:#f1c40f; }    /* vàng */
.strong{ background:#00ffc8; }    /* xanh */

/* ===== BOX AI ===== */
.ai-box{
    font-size:16px;
    font-weight:bold;
    color:#00ffc8;
    text-align:center;
}

/* ===== LỊCH SỬ ===== */
.history-box{
    font-size:14px;
    letter-spacing:2px;
    word-wrap:break-word;
    color:#ccc;
}
</style>
</head>
<body><h3>Roulette Europe AI PRO+</h3><div class="mode-box">
<button class="mode-btn active" id="riskBtn" onclick="setMode('risk')">Risk</button>
<button class="mode-btn" id="safeBtn" onclick="setMode('safe')">Safe</button>
</div><div class="zero" onclick="addNumber(0)">0</div><div class="columns">
<div class="col" id="col1"><div class="col-title">Cột 1</div><div class="grid" id="g1"></div></div>
<div class="col" id="col2"><div class="col-title">Cột 2</div><div class="grid" id="g2"></div></div>
<div class="col" id="col3"><div class="col-title">Cột 3</div><div class="grid" id="g3"></div></div>
</div>
<!-- ===== BOX % ===== -->
<div class="box">
    <div class="bar-bg"><div class="bar" id="b1"></div></div>
    <div class="bar-bg"><div class="bar" id="b2"></div></div>
    <div class="bar-bg"><div class="bar" id="b3"></div></div>
</div>

<!-- ===== BOX AI ===== -->
<div class="box ai-box">
    <div id="ai">AI: -</div>
    <div id="winrate">Win rate: 0%</div>
</div>

<!-- ===== BOX LỊCH SỬ ===== -->
<div class="box history-box" id="history">
</div>

<script>
// ===== CẤU HÌNH =====
let history = [];
let maxHistory = 15;
let mode = "risk";
let lastPrediction = null;
let win = 0;
let total = 0;
let doubleMode = true; // bật đánh 2 cột
let predictCols = []; // lưu các cột AI theo

// ===== MÀU ROULETTE CHUẨN =====
const redNums = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];

// ===== CHẾ ĐỘ =====
function setMode(m){
    mode = m;
    document.getElementById("riskBtn").classList.remove("active");
    document.getElementById("safeBtn").classList.remove("active");

    if(m=="risk"){
        document.getElementById("riskBtn").classList.add("active");
    }else{
        document.getElementById("safeBtn").classList.add("active");
    }
}

// ===== TẠO BẢNG SỐ =====
function createGrid(){
    for(let i=1;i<=36;i++){
        let btn = document.createElement("div");
        btn.className="num";
        btn.innerText=i;
        btn.onclick=()=>addNumber(i);

        // Màu đỏ đen
        if(redNums.includes(i)){
            btn.style.background="#c0392b";
        }else{
            btn.style.background="#111";
        }

        // Chia cột giống bàn thật
        if(i%3==1){
            document.getElementById("g1").appendChild(btn);
        }else if(i%3==2){
            document.getElementById("g2").appendChild(btn);
        }else{
            document.getElementById("g3").appendChild(btn);
        }
    }
}
createGrid();

function scanEffect(callback){
    let cols = ["col1","col2","col3"];
    let i = 0;
    let loop = setInterval(()=>{
        cols.forEach(c=>{
            document.getElementById(c).classList.remove("scan");
        });

        document.getElementById(cols[i]).classList.add("scan");
        i++;

        if(i>=6){
            clearInterval(loop);
            cols.forEach(c=>{
                document.getElementById(c).classList.remove("scan");
            });
            callback();
        }
    },120);
}

// ===== THÊM KẾT QUẢ =====
function addNumber(n){

    // ===== Nếu ra 0 → RESET =====
    if(n === 0){
        history = [];
        win = 0;
        total = 0;
        predictCols = [];

        // Reset thanh %
        document.getElementById("b1").style.width = "0%";
        document.getElementById("b2").style.width = "0%";
        document.getElementById("b3").style.width = "0%";

        // Bỏ highlight cột
        document.getElementById("col1").classList.remove("active-col");
        document.getElementById("col2").classList.remove("active-col");
        document.getElementById("col3").classList.remove("active-col");

        // Reset text
        document.getElementById("ai").innerText = "AI: Reset (ra 0)";
        document.getElementById("winrate").innerText = "Win rate: 0%";
        document.getElementById("history").innerText = "";

        return;
    }

    // ===== Thêm kết quả bình thường =====
    history.unshift(n);
    if(history.length>maxHistory) history.pop();

    updateHistory();
    analyze(n);
}

// ===== HIỂN THỊ LỊCH SỬ =====
function updateHistory(){
    document.getElementById("history").innerText =
        history.join("  ");
}

// ===== PHÂN TÍCH AI =====
function analyze(lastNumber){

    // ===== TÍNH CỘT =====
    let col = [0,0,0];

    history.forEach(n=>{
        if(n==0) return;
        if(n%3==1) col[0]++;
        else if(n%3==2) col[1]++;
        else col[2]++;
    });

    let percent = col.map(v=>{
        if(history.length==0) return 0;
        let totalSpin = history.filter(x=>x!=0).length;
if(totalSpin==0) return 0;
return Math.round(v/totalSpin*100);
    });

    // ===== RISK / SAFE =====
    let sorted = percent
    .map((v,i)=>({v,i}))
    .sort((a,b)=> mode=="risk" ? b.v-a.v : a.v-b.v);

if(doubleMode){
    // chọn 2 cột
    predictCols = [sorted[0].i+1, sorted[1].i+1];
}else{
    predictCols = [sorted[0].i+1];
}

lastPrediction = predictCols;

    // ===== HIGHLIGHT CỘT =====
scanEffect(()=>{
    document.getElementById("col1").classList.remove("active-col");
    document.getElementById("col2").classList.remove("active-col");
    document.getElementById("col3").classList.remove("active-col");

    predictCols.forEach(c=>{
        document.getElementById("col"+c).classList.add("active-col");
    });
});

    // ===== THANH % =====
    setBar("b1", percent[0]);
setBar("b2", percent[1]);
setBar("b3", percent[2]);

function setBar(id, p){
    let bar = document.getElementById(id);
    bar.style.width = p + "%";

    bar.classList.remove("weak","medium","strong");

    if(p < 30){
        bar.classList.add("weak");
    }else if(p < 50){
        bar.classList.add("medium");
    }else{
        bar.classList.add("strong");
    }
}

    // ===== AI TEXT =====
    document.getElementById("ai").innerText =
    "AI theo: Cột " + predictCols.join(" + ");

    // ===== WIN RATE =====
    if(total>0){
        let wr = Math.round(win/total*100);
        document.getElementById("winrate").innerText =
            "Win rate: "+wr+"%";
    }

    // ===== KIỂM TRA THẮNG =====
    if(total>0){
        let realCol = 0;
        if(lastNumber!=0){
            realCol = lastNumber%3;
            if(realCol==0) realCol=3;
        }

        if(lastPrediction.includes(realCol)){
            win++;
        }
    }

    total++;
}
</script>

</body>
</html>
